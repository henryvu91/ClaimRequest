<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="" name="description">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <title>Login Page</title>
    <link href="./favicon.ico" rel="icon" type="image/x-icon">
    <link rel="stylesheet" th:href="@{/node_modules/normalize.css/normalize.css}">
    <link rel="stylesheet" th:href="@{/node_modules/bootstrap/dist/css/bootstrap.css}">
    <link rel="stylesheet" th:href="@{/node_modules/bootstrap-icons/font/bootstrap-icons.css}">
    <link rel="stylesheet" th:href="@{stylesheet/css/style.css}">

    <style>
        .error {
            color:red;
        }
    </style>
</head>
<body>
<div class="container-fluid bg-grey min-vh-100 d-flex">
    <div
            class="container w-75 bg-white border border-grey border-round align-self-center main-form px-0"
    >
        <h2
                class="title text-grey bg-grey m-0 py-2 pl-3 border-bottom border-grey"
        >
            Update Staff Information
        </h2>

        <form class="p-4" id="updateStaffForm" th:action="@{/staff/update}" th:object="${updateStaff}" method="post">
            <input type="hidden" th:field="*{id}"/>
<!--            Start name-->
            <div class="mb-3">
                <label class="form-label" for="form-updateStaff__name"
                >Staff Name</label
                >
                <p
                        class="form-control shadow-none reset"
                        id="form-updateStaff__name"
                        th:text="*{name}"
                ></p>
                <!--            End name-->

                <!--            Start department-->
            </div>

            <div class="mb-3">
                <label class="form-label" for="form-updateStaff__department"
                >Department</label
                >

                <select
                        class="form-control shadow-none reset"
                        id="form-updateStaff__department"
                        required
                        th:field="*{departmentId}"
                >
                    <option th:each="item: ${departments}" th:value="${item.id}" th:text="${item.name}"></option>
                </select>

            </div>
            <!--            End department-->

            <!--            Start Role-->
            <div class="mb-3">
                <label class="form-label" for="form-createStaff__role"
                >Role</label
                >

                <select
                        class="form-control shadow-none reset"
                        id="form-createStaff__role"
                        required
                        th:field="*{roleId}"
                >
                    <option th:each="role: ${roles}" th:value="${role.id}" th:text="${role.name}"></option>
                </select>
            </div>
            <!--            End Role-->

            <!--            Start Salary-->
            <div class="mb-3">
                <label class="form-label" for="form-updateStaff__salary"
                >Salary</label
                >
                <input
                        class="form-control shadow-none reset"
                        id="form-updateStaff__salary"
                        th:field="*{salary}"
                        required
                        type="number"
                />
                <div
                        class="text-danger"
                        th:errors="*{salary}"
                        th:if="${#fields.hasErrors('salary')}"
                >
                    Salary Error
                </div>
            </div>
            <!--            End Salary-->

            <button type="submit" class="btn btn-success my-2 py-2 btn-font-size">
                Save
            </button>

            <button type="reset" class="btn btn-success my-2 py-2 btn-font-size">
                Reset
            </button>
            <a th:href="@{/staff/view}" class="btn btn-success my-2 py-2 btn-font-size">
                Cancel
            </a>
        </form>
    </div>
</div>
<script th:src="@{/node_modules/jquery/dist/jquery.js}"></script>
<script th:src="@{/node_modules/jquery-validation/dist/jquery.validate.js}"></script>
<script th:src="@{/node_modules/bootstrap/dist/js/bootstrap.bundle.js}"></script>
<script th:src="@{/javascript/main.js}">
</script>
<script>
    $(document).ready(function () {

        $("#updateStaffForm").validate({
            errorPlacement: function (error, element) {
                error.insertBefore(element);
            },

            rules: {
                name: {
                    required: true,
                },

                departmentId:{
                  required:true
                },

                roleId:{
                    required:true
                },

                salary:{
                    required:true,
                    isNumber:true,
                    isPositive:true
                }
            },
            messages: {
                name: {
                    required: "Name must be filled",

                },

                departmentId:{
                    required: "Department must be filled"
                },

                roleId:{
                    required:"Role must be filled"
                },

                salary:{
                    required:"Salary must be filled",
                    isNumber:"Salary must be number",
                    isPositive:"Salary must be positive"
                }
            },

            submitHandler: function (form) {
                form.submit();
            },
        });

        $.validator.methods.isNumber = function (value,element){
            return !isNaN(value);
        }

        $.validator.methods.isPositive = function (value,element){
            return value > 0;
        }

    });
</script>
</body>
</html>
